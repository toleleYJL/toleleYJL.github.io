<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">




<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

  <meta name="author" content="tolele">


  <meta name="subtitle" content="tolele">




<title>记一次GitHub+Hexo搭建个人博客的过程 | tolele的自由小屋</title>



    <link rel="icon" href="/favicon.png">



<link rel="stylesheet" href="/css/style.css">


<link rel="stylesheet" href="/lib/tocbot/tocbot.css">


<link rel="stylesheet" href="/lib/fancybox/fancybox.min.css">






<meta name="generator" content="Hexo 5.4.2"></head>
<body>
  <div id="app">
    <header class="header">
  <a href="/" class="logo" focusable="false">
    <img src="/images/logo.svg" alt="tolele的自由小屋" />
  </a>
  <nav class="nav">
    <div class="spacer"></div>
    <div class="right">
      <div class="menu">
        
          <a class="item" href="/archives">Posts</a>
          
          <a class="item" href="/category">Categories</a>
          
          <a class="item" href="/tag">Tags</a>
          
      </div>
      <div class="links">
        
          
            <a title="Github" target="_blank" rel="noopener" href="https://github.com/toleleyjl" class="link-item">
              <span class="iconify" data-icon="ri:github-line"></span>
            </a>
          
        
      </div>
      <a class="toggleDark" id="dark-mode">
        <span class="iconify" data-icon="ri:sun-line" id="sun-icon" style="display: none"></span>
        <span class="iconify" data-icon="ri:moon-line" id="moon-icon" style="display: none"></span>
      </a>
    </div>
  </nav>
</header>

    <main class="container">
      

  <div class="post-toc">
  <div class="tocbot-list">
  </div>
  <div class="tocbot-list-menu">
    <a class="tocbot-toc-expand" onclick="expand_toc()">Expand all</a>
    <a onclick="go_top()">Back to top</a>
    <a onclick="go_bottom()">Go to bottom</a>
  </div>
</div>



<div class="post">
  <div class="post-header">
    <h1 class="post-title">记一次GitHub+Hexo搭建个人博客的过程</h1>
    <p class="post-meta">2022-10-02 08:10:37</p>
  </div>
  <div class="post-content">
    <article>
      <h2 id="0x00：前言"><a href="#0x00：前言" class="headerlink" title="0x00：前言"></a><div id="text00">0x00：前言</div></h2><p>突然心血来潮，想要搭建个人博客。在网上了解了一下，GitHub+Hexo看起来不错，免费而且不难。由于搭建过程的记录是在搭建完之后才记录的，尽管努力回忆，但恐怕还是会有一些过程丢失。如果搭建过程遇到解决不了的问题，欢迎通过QQ与我交流！</p>
<br>

<h2 id="0x01：Node-js、git和hexo的安装"><a href="#0x01：Node-js、git和hexo的安装" class="headerlink" title="0x01：Node.js、git和hexo的安装"></a><div id="text01">0x01：Node.js、git和hexo的安装</div></h2><div style="font-size: 21px;"><b>1. Node.js：</b></div>

<p>Node.js是一个基于Chrome V8 引擎的JavaScript运行环境。</p>
<p>我们首先需要知道，JavaScript脚本是通过嵌入在HTML中，来为网页添加各式各样的动态功能。随着JavaScript语言越来越多人使用，人们不禁想要将其用于后端开发。了解到，JavaScript脚本能够在浏览器运行是因为浏览器中配有JavaScript解析引擎，所以人们就想到将解析引擎脱离出来，这就是Node.js的来源。</p>
<p>官网下载：<a target="_blank" rel="noopener" href="https://nodejs.org/en/">https://nodejs.org/en/</a></p>
<p>下载推荐的版本即可！</p>
<img src="/images/%E8%AE%B0%E4%B8%80%E6%AC%A1GitHub-Hexo%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%9A%84%E8%BF%87%E7%A8%8B/pic01.jpg" alt="pic01" style="zoom: 50%;" />

<p>安装过程就是无脑next，可自行选择安装目录。</p>
<p>检查一下是否安装成功：</p>
<img src="/images/%E8%AE%B0%E4%B8%80%E6%AC%A1GitHub-Hexo%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%9A%84%E8%BF%87%E7%A8%8B/pic02.jpg" alt="pic02" style="zoom:80%;" />

<p>有显示版本说明已经安装配置好了。这里的npm是nodejs的包管理器（package manager），就像apt是Ubuntu的包管理器一样。</p>
<br>

<div style="font-size: 21px;"><b>2.git:</b></div>

<p>git是一种分布式的版本管理系统，Linux的创造者Linus写的。</p>
<p>git的作用就是对文件进行版本管理，方便在不同版本进行切换修改，类似文件分不同时间备份让后需要时找回其中一份代替，不过更方便使用。</p>
<p>官网下载：<a target="_blank" rel="noopener" href="https://git-scm.com/">https://git-scm.com</a></p>
<p>点击下面的Download，然后选择Windows系统：</p>
<img src="/images/%E8%AE%B0%E4%B8%80%E6%AC%A1GitHub-Hexo%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%9A%84%E8%BF%87%E7%A8%8B/pic03.jpg" alt="pic03" style="zoom: 67%;" />

<br>

<p>组件的选择：</p>
<img src="/images/%E8%AE%B0%E4%B8%80%E6%AC%A1GitHub-Hexo%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%9A%84%E8%BF%87%E7%A8%8B/pic04.jpg" alt="pic04" style="zoom: 67%;" />

<p>各个组件勾选含义 ：</p>
<ul>
<li><p>Additional icons On the Desktop:  桌面添加图标</p>
</li>
<li><p>Windows Explorer integration Git Bash Here/Git GUI here:  </p>
<p>在windows资源管理器里集成Git Bash和Git GUI</p>
</li>
<li><p>Git LFS (Large File Support):  Git大文件支持</p>
</li>
<li><p>Associate .git* configuration files with the default text editor:  </p>
<p>将 .git* 配置文件与默认文本编辑器关联</p>
</li>
<li><p>Associate .sh files to be run with Bash:  关联要与 Bash 运行的 .sh 文件</p>
</li>
<li><p>Check daily for Git for Windows updates:  每日检查Windows版本的Git更新</p>
</li>
<li><p>(NEW!)Add a Git Bash Profile to Windows Terminal:  </p>
<p>将Git Bash的配置文件添加在Windows终端中的配置文件中（这是2.34.1版本新增的功能，省去了自己额外单独添加）</p>
</li>
</ul>
<p>可以按照上述截图进行勾选，也可以自己根据组件含义进行勾选自己需要的组件，之后点击Next。</p>
<p>其它的无脑next即可，若想了解其中选项的含义，这里篇文章有部分解释：<a target="_blank" rel="noopener" href="https://sxlz.me/post/hexo-aurora-github%E6%90%AD%E5%BB%BA#2-%E5%AE%89%E8%A3%85git">https://sxlz.me/post/hexo-aurora-github%E6%90%AD%E5%BB%BA#2-%E5%AE%89%E8%A3%85git</a></p>
<br>

<div style="font-size: 21px;"><b>3.Hexo</b></div>

<p>一般网站需要两种东西：程序+服务器（用于存放程序）。</p>
<p>hexo可以看着是一个工具，用来生成博客中的html页面。而GitHub仓库相当于服务器，用来存放hexo生成的html等文件的地方。</p>
<p>安装：</p>
<pre><code class="shell">npm install hexo-cli -g
</code></pre>
<p>可以在本地终端执行，好像也可以在git bash中执行。</p>
<p>执行可能遇到权限不够的报错，这样需要用管理员的方式打开cmd或者git bash</p>
<br>

<p><strong><u>最后全部检查一下：</u></strong></p>
<img src="/images/%E8%AE%B0%E4%B8%80%E6%AC%A1GitHub-Hexo%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%9A%84%E8%BF%87%E7%A8%8B/pic05.jpg" alt="pic05" style="zoom:67%;" />

<br>

<h2 id="0x02：创建GitHub仓库及配置ssh连接"><a href="#0x02：创建GitHub仓库及配置ssh连接" class="headerlink" title="0x02：创建GitHub仓库及配置ssh连接"></a><div id="text02">0x02：创建GitHub仓库及配置ssh连接</div></h2><div style="font-size: 21px;"><b>创建GitHub博客仓库：</b></div>


<p>GitHub官网：<a target="_blank" rel="noopener" href="https://github.com/">https://github.com/</a></p>
<p>没账号的先注册一个，注意用户名要取好点，最后搭好的博客的url为<code>用户名.github.io</code>。如果已经注册了但对用户名不满意的话，不知道有没有其它方法，仓库如果没有重要的东西，可以注销掉账号，然后再重新注册。</p>
<p>点击右上角的三角形，New repository创建一个新仓库。仓库名需要为<code>用户名.github.io</code>，这样最后搭好的博客的url才可以为<code>用户名+github.io</code>。仓库描述可写可不写，最后点击下面的创建即可。</p>
<p><img src="/images/%E8%AE%B0%E4%B8%80%E6%AC%A1GitHub-Hexo%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%9A%84%E8%BF%87%E7%A8%8B/pic06.jpg" alt="pic06"></p>
<br>

<div style="font-size: 21px;"><b>进行ssh连接：</b></div>

<p>先创建一个目录作为博客根目录，用于存放和博客相关的文件。</p>
<p>这是我的博客根目录：E:\myblog\GitHub_text\blogfile</p>
<p>在博客根目录右键，点击<code>Git Bash Here</code>。执行命令ssh，检查ssh工具是否已安装。</p>
<p><img src="/images/%E8%AE%B0%E4%B8%80%E6%AC%A1GitHub-Hexo%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%9A%84%E8%BF%87%E7%A8%8B/pic07.jpg" alt="pic07"></p>
<br>

<p>在本地生成ssh key：</p>
<pre><code class="shell">ssh-keygen -t rsa -C &quot;邮箱地址&quot;
</code></pre>
<p><img src="/images/%E8%AE%B0%E4%B8%80%E6%AC%A1GitHub-Hexo%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%9A%84%E8%BF%87%E7%A8%8B/pic08.jpg" alt="pic08"></p>
<p>按图输入即可，key保存在了本地上，具体路径可看红框中。</p>
<p>找到key的位置，用记事本打开id_rsa.pub文件，<code>ctrl + A</code> 全选，<code>ctrl + C</code>复制。</p>
<br>

<p>将key复制到GitHub上，用于与主机连接：</p>
<p><img src="/images/%E8%AE%B0%E4%B8%80%E6%AC%A1GitHub-Hexo%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%9A%84%E8%BF%87%E7%A8%8B/pic09.jpg" alt="pic09"></p>
<p>填写key：</p>
<p><img src="/images/%E8%AE%B0%E4%B8%80%E6%AC%A1GitHub-Hexo%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%9A%84%E8%BF%87%E7%A8%8B/pic10.jpg" alt="pic10"></p>
<br>

<p>在Git Bash里执行以下命令，测试ssh是否绑定成功：</p>
<pre><code class="shell">ssh -T git@github.com
</code></pre>
<p><img src="/images/%E8%AE%B0%E4%B8%80%E6%AC%A1GitHub-Hexo%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%9A%84%E8%BF%87%E7%A8%8B/pic11.jpg" alt="pic11"></p>
<p>若发生报错：<code>[git@github.com](mailto:git@github.com): Permission denied (publickey).</code></p>
<p>可试试命令：</p>
<pre><code class="shell">ssh-agent -s
ssh-add ~/.ssh/id_rsa
</code></pre>
<blockquote>
<p>来源：<a target="_blank" rel="noopener" href="https://blog.csdn.net/helloasimo/article/details/123778112">https://blog.csdn.net/helloasimo/article/details/123778112</a></p>
</blockquote>
<br>

<h2 id="0x03：在本地搭建博客"><a href="#0x03：在本地搭建博客" class="headerlink" title="0x03：在本地搭建博客"></a><div id="text03">0x03：在本地搭建博客</div></h2><blockquote>
<p>说明一下，这一步会发生很多报错，要做好心理准备！</p>
</blockquote>
<div style="font-size: 21px;"><b>初始化Hexo：</b></div>

<p>在博客根目录右键，打开Git Bash：</p>
<pre><code class="shell">hexo init
</code></pre>
<p>(之前弄过了，所以这里就用别人博客中的图啦~)</p>
<p><img src="/images/%E8%AE%B0%E4%B8%80%E6%AC%A1GitHub-Hexo%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%9A%84%E8%BF%87%E7%A8%8B/pic12.jpg" alt="pic12"></p>
<br>

<div style="font-size: 21px;"><b>在本地生成Hexo页面：</b></div>

<pre><code class="shell">hexo s
</code></pre>
<p><img src="/images/%E8%AE%B0%E4%B8%80%E6%AC%A1GitHub-Hexo%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%9A%84%E8%BF%87%E7%A8%8B/pic13.jpg" alt="pic13"></p>
<br>

<div style="font-size: 21px;"><b>用浏览器打开检查一下：</b></div>

<p>看到如下图，说明本地已经搭好了。</p>
<p><img src="/images/%E8%AE%B0%E4%B8%80%E6%AC%A1GitHub-Hexo%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%9A%84%E8%BF%87%E7%A8%8B/pic14.jpg" alt="pic14"></p>
<br>

<p>这里补充一下hexo的命令：</p>
<pre><code class="Shell">hexo clean     #清理编译文件
hexo generate  # 简写 hexo g, 编译项目
hexo server    #简写 hexo s,本地运行预览项目
hexo deploy    #简写 hexo d,将编译后的文件上传至 GitHub

# 一般在本地预览会执行： 
hexo clean &amp; hexo g &amp; hexo s

# 部署到GitHub会执行：
hexo clean &amp; hexo g &amp; hexo d
</code></pre>
<br>

<h2 id="0x04：将博客部署到GitHub"><a href="#0x04：将博客部署到GitHub" class="headerlink" title="0x04：将博客部署到GitHub"></a><div id="test04">0x04：将博客部署到GitHub</div></h2><div style="font-size: 21px;"><b>1、修改配置文件</b></div>

<p>打开博客根目录下的_config.yml文件，填写数据：</p>
<p><img src="/images/%E8%AE%B0%E4%B8%80%E6%AC%A1GitHub-Hexo%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%9A%84%E8%BF%87%E7%A8%8B/pic15.jpg" alt="pic15"></p>
<pre><code class="yaml">deploy:
  type: git
  repository: 你的github地址
  branch: main
# 注意冒号后面有个空格
</code></pre>
<br>

<div style="font-size: 21px;"><b>2、安装hexo-deployer-git自动部署发布工具</b></div>

<pre><code class="shell">npm install hexo-deployer-git --save
</code></pre>
<br>

<div style="font-size: 21px;"><b>3、上传部署到GitHub</b></div>

<p>首先获取GitHub的个人令牌（token），因为后面需要进行验证，token这个方式是比较方便的。</p>
<p><img src="/images/%E8%AE%B0%E4%B8%80%E6%AC%A1GitHub-Hexo%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%9A%84%E8%BF%87%E7%A8%8B/pic16.jpg" alt="pic16"></p>
<img src="/images/%E8%AE%B0%E4%B8%80%E6%AC%A1GitHub-Hexo%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%9A%84%E8%BF%87%E7%A8%8B/pic17.jpg" alt="pic17" style="zoom:80%;" />

<p>点击生成，生成的序列号，要复制下来在保存在本地，他只显示一次，如果忘记了，就需要重新生成了。</p>
<br>

<p>执行hexo clean和hexo g：</p>
<img src="/images/%E8%AE%B0%E4%B8%80%E6%AC%A1GitHub-Hexo%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%9A%84%E8%BF%87%E7%A8%8B/pic18.jpg" alt="pic18" style="zoom:80%;" />

<br>

<p>然后hexo d上传到GitHub，第一次上传需要身份验证：</p>
<img src="/images/%E8%AE%B0%E4%B8%80%E6%AC%A1GitHub-Hexo%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%9A%84%E8%BF%87%E7%A8%8B/pic19.jpg" alt="pic19" style="zoom: 67%;" />

<p>使用Token进行验证，复制粘贴之前保存的个人令牌（token）。剩下的就是等待了，可能会因为网络差的原因产出上传报错，可以多试试几次。</p>
<img src="/images/%E8%AE%B0%E4%B8%80%E6%AC%A1GitHub-Hexo%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%9A%84%E8%BF%87%E7%A8%8B/pic20.jpg" alt="pic20" style="zoom: 50%;" />

<p>打开浏览器访问 <code>用户名.github.io</code>看看是否可以。</p>
<br>

<h2 id="0x05：更换主题"><a href="#0x05：更换主题" class="headerlink" title="0x05：更换主题"></a><div id="text05">0x05：更换主题</div></h2><p>Hexo主题模板库：<a target="_blank" rel="noopener" href="https://hexo.io/themes/">https://hexo.io/themes/</a></p>
<p>我用的是仙人掌cactus这个主题，比较简洁：</p>
<p><a target="_blank" rel="noopener" href="https://github.com/probberechts/hexo-theme-cactus">https://github.com/probberechts/hexo-theme-cactus</a></p>
<br>

<p>主题的配置方法可以在项目文件中找到，这里我以cactus为例说一点东西。</p>
<div style="font-size: 21px;"><b>1、在博客根目录执行如下命令，将主题项目clone下来：</b></div>

<pre><code class="shell">git clone https://github.com/probberechts/hexo-theme-cactus.git themes/cactus
</code></pre>
<p>项目保存在了博客根目录themes文件夹下。</p>
<div style="font-size: 21px;"><b>2、在_config.yml配置文件中，更改主题为cactus：</b></div>

<p><img src="/images/%E8%AE%B0%E4%B8%80%E6%AC%A1GitHub-Hexo%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%9A%84%E8%BF%87%E7%A8%8B/pic21.jpg" alt="pic21"></p>
<br>

<p>其他的配置可参考：</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/Reinhart_L/article/details/122587975">https://blog.csdn.net/Reinhart_L/article/details/122587975</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/rab3it/p/11366775.html">https://www.cnblogs.com/rab3it/p/11366775.html</a></p>
</blockquote>
<div style="font-size: 21px;"><b>另外：</b></div>

<p>后来我把主题换成了Butterfly，这个简洁又好看！（现在又换了🤣🤣）</p>
<p>主题作者教程：<a target="_blank" rel="noopener" href="https://butterfly.js.org/posts/21cfbf15/">https://butterfly.js.org/posts/21cfbf15/</a></p>
<p><strong>问题</strong>：如果发现部署后空行不显示，可以用<code>&lt;br&gt;</code> 进行分隔。</p>
<p><strong>问题</strong>：上传到GitHub后图片不显示，点击<a target="_blank" rel="noopener" href="https://yinyoupoet.github.io/2019/09/03/hexo%E5%8D%9A%E5%AE%A2%E4%B8%AD%E6%8F%92%E5%85%A5%E5%9B%BE%E7%89%87/">这里</a>。</p>
<p>本文参考：<a target="_blank" rel="noopener" href="https://sxlz.me/post/hexo-aurora-github%E6%90%AD%E5%BB%BA">https://sxlz.me/post/hexo-aurora-github搭建</a></p>

    </article>
  </div>
  <div class="post-footer">
    <a href="javascript:window.history.back();">
      cd ..
    </a>
    <br>
    <a href="/">
      cd /
    </a>
  </div>
  <div class="post-license">
    <span>
      <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" style="color: inherit;">
        CC BY-NC-SA 4.0
      </a>
      2021-PRESENT © tolele
    </span>
    <div></div>
  </div>
  <div class="post-comment">
    <div id="disqusjs"></div>
  </div>
</div>

    </main>
    <footer class="footer">
  <div class="copyright">
    <span>Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/xbmlz/hexo-theme-maple" target="_blank">Maple</a></span>
  </div>
</footer>

  </div>
  <script>
  (function() {
    const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
    const setting = localStorage.getItem('hexo-color-scheme') || 'auto'
    if (setting === 'dark' || (prefersDark && setting !== 'light'))
      document.documentElement.classList.toggle('dark', true)
  })()
</script>


<script src="/js/jquery-3.4.1.min.js"></script>


<script src="/js/index.js"></script>



<script src="/js/iconify.min.js"></script>


<script>
  window.onload = () => {
    let media = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)')
    let isDark = () => {
      const setting = localStorage.getItem('hexo-color-scheme') || 'auto'
      if (setting === 'dark' || (media.matches && setting !== 'light')) {
        return true
      } else{
        return false
      }
    }
    // 切换为深色模式
    let toggleDarkMode = () => {
      document.documentElement.classList.toggle('dark', true)
      document.getElementById('moon-icon').style.display = 'block'
      document.getElementById('sun-icon').style.display = 'none'
      setDarkMode('dark')
    }
    // 切换为浅色模式
    let toggleLightMode = () => {
      document.documentElement.classList.toggle('dark', false)
      document.getElementById('moon-icon').style.display = 'none'
      document.getElementById('sun-icon').style.display = 'block'
      setDarkMode('light')
    }
    let setDarkMode = (scheme) => {
      const darkMode = media.matches ? 'dark' : 'light'
      if (darkMode !== scheme) {
        localStorage.setItem('hexo-color-scheme', scheme)
      } else{
        localStorage.setItem('hexo-color-scheme', 'auto')
      }
    }
    // 切换为自动模式
    let updateMode = (e) => {
      const setting = localStorage.getItem('hexo-color-scheme') || 'auto'
      console.log(setting, e.matches)
      if (setting === 'auto') {
        if (e.matches) {
          toggleDarkMode()
        } else {
          toggleLightMode()
        }
      }
    }

    // let media = getMedia()
    if (typeof media.addEventListener === 'function') {
      media.addEventListener('change', updateMode)
    } else if (typeof media.addListener === 'function') {
      media.addListener(updateMode)
    }

    if (isDark()) {
      document.getElementById('moon-icon').style.display = 'block'
    } else {
      document.getElementById('sun-icon').style.display = 'block'
    }

    document.getElementById('moon-icon').addEventListener('click', () => {
      toggleLightMode()
    })
    document.getElementById('sun-icon').addEventListener('click', () => {
      toggleDarkMode()
    })
  }
</script>



<script src="/lib/tocbot/tocbot.min.js"></script>

<script>
  var tocbot_timer;
  var DEPTH_MAX = 6; // 为 6 时展开所有
  var tocbot_default_config = {
    tocSelector: '.tocbot-list',
    contentSelector: '.post-content',
    headingSelector: 'h1, h2, h3, h4, h5',
    orderedList: false,
    scrollSmooth: true,
    onClick: extend_click,
  };
  function extend_click() {
    clearTimeout(tocbot_timer);
    tocbot_timer = setTimeout(function () {
      tocbot.refresh(obj_merge(tocbot_default_config, {
        hasInnerContainers: true
      }));
    }, 420); // 这个值是由 tocbot 源码里定义的 scrollSmoothDuration 得来的
  }
  function expand_toc() {
    var b = document.querySelector('.tocbot-toc-expand');
    var expanded = b.getAttribute('data-expanded');
    expanded ? b.removeAttribute('data-expanded') : b.setAttribute('data-expanded', true);
    tocbot.refresh(obj_merge(tocbot_default_config, {
      collapseDepth: expanded ? 1 : DEPTH_MAX
    }));
    b.innerText = expanded ? 'Expand all' : 'Collapse all';
  }
  function go_top() {
    window.scrollTo(0, 0);
  }
  function go_bottom() {
    window.scrollTo(0, document.body.scrollHeight);
  }
  function obj_merge(target, source) {
    for (var item in source) {
      if (source.hasOwnProperty(item)) {
        target[item] = source[item];
      }
    }
    return target;
  }
  $(document).ready(() => {
    tocbot.init(obj_merge(tocbot_default_config, {
      collapseDepth: 1
    }));
  });
</script>






<script async src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    "HTML-CSS": {
        preferredFont: "TeX",
        availableFonts: ["STIX","TeX"],
        linebreaks: { automatic:true },
        EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50)
    },
    tex2jax: {
        inlineMath: [ ["$", "$"], ["\\(","\\)"] ],
        processEscapes: true,
        ignoreClass: "tex2jax_ignore|dno",
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
        equationNumbers: { autoNumber: "AMS" },
        noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } },
        Macros: { href: "{}" }
    },
    messageStyle: "none"
  });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
      }
  });
</script>




<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<script>
  $(document).ready(() => {
    const maraidConfig = {
      theme: "default",
      logLevel: 3,
      flowchart: { curve: "linear" },
      gantt: { axisFormat: "%m/%d/%Y" },
      sequence: { actorMargin: 50 },
    };
    mermaid.initialize(maraidConfig);
  });
</script>




<script src="/lib/fancybox/fancybox.umd.js"></script>

<script>
  $(document).ready(() => {
    $('.post-content').each(function(i){
      $(this).find('img').each(function(){
        if ($(this).parent().hasClass('fancybox') || $(this).parent().is('a')) return;
        var alt = this.alt;
        if (alt) $(this).after('<span class="fancybox-alt">' + alt + '</span>');
        $(this).wrap('<a class="fancybox-img" href="' + this.src + '" data-fancybox=\"gallery\" data-caption="' + alt + '"></a>')
      });
      $(this).find('.fancybox').each(function(){
        $(this).attr('rel', 'article' + i);
      });
    });

    Fancybox.bind('[data-fancybox="gallery"]', {
        // options
    })
  })
</script>



</body>

</html>
