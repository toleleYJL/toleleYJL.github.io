<!DOCTYPE html><html lang="zh-CN"><head><title>IoTå›ºä»¶æ¨¡æ‹Ÿ</title><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=0.5"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><link rel="stylesheet" href="/css/highlight/xcode.min.css"><link rel="stylesheet" href="/css/bootstrap/bootstrap-tooltips.css"><link rel="stylesheet" href="/css/post.css"><script src="/js/jquery.min.js"></script><meta name="generator" content="Hexo 5.4.2"></head><body><script>if (/mobile/i.test(navigator.userAgent) || /android/i.test(navigator.userAgent)) {
  document.body.classList.add('mobile')
}</script><div><div class="inner"><h1>IoTå›ºä»¶æ¨¡æ‹Ÿ</h1><div class="time">2023-04-21</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#0x00%EF%BC%9A%E5%89%8D%E8%A8%80"><span class="toc-text">0x00ï¼šå‰è¨€</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x01%EF%BC%9A%E5%AE%89%E8%A3%85%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91%E5%B7%A5%E5%85%B7"><span class="toc-text">0x01ï¼šå®‰è£…äº¤å‰ç¼–è¯‘å·¥å…·</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x02%EF%BC%9A%E5%86%85%E6%A0%B8%E6%BA%90%E7%A0%81%E7%BC%96%E8%AF%91"><span class="toc-text">0x02ï¼šå†…æ ¸æºç ç¼–è¯‘</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x03%EF%BC%9A%E5%88%B6%E4%BD%9C%E6%A0%B9%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F"><span class="toc-text">0x03ï¼šåˆ¶ä½œæ ¹æ–‡ä»¶ç³»ç»Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x04%EF%BC%9A%E5%88%B6%E4%BD%9C%E8%99%9A%E6%8B%9F%E5%AD%98%E5%82%A8%E4%BB%8B%E8%B4%A8"><span class="toc-text">0x04ï¼šåˆ¶ä½œè™šæ‹Ÿå­˜å‚¨ä»‹è´¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x05%EF%BC%9A%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5"><span class="toc-text">0x05ï¼šå‚è€ƒé“¾æ¥</span></a></li></ol><h2 id="0x00ï¼šå‰è¨€"><a href="#0x00ï¼šå‰è¨€" class="headerlink" title="0x00ï¼šå‰è¨€"></a>0x00ï¼šå‰è¨€</h2><p>æ¨¡æ‹Ÿæ‰€éœ€å·¥å…·ï¼š<strong>1)</strong> äº¤å‰ç¼–è¯‘å·¥å…·ï¼› <strong>2)</strong> qemuï¼› <strong>3)</strong> linuxå†…æ ¸æºç ï¼› <strong>4)</strong> busyboxã€‚</p>
<p>IoTç³»ç»Ÿå¿…é¡»åŒ…å«ä¸‰ä»¶å¥—ï¼šæ ¹æ–‡ä»¶ç³»ç»Ÿã€å†…æ ¸é•œåƒã€bootleaderã€‚åœ¨å¼€å‘æ¿ä¸­ï¼Œä¸€èˆ¬æ˜¯ä½¿ç”¨u-bootå®ç°bootleaderåŠŸèƒ½ã€‚ä¸è¿‡ç”±äºqemuè‡ªå¸¦äº†bootleaderï¼Œæ‰€ä»¥å¯ä»¥ä¸éœ€è¦u-bootã€‚</p>
<br>

<h2 id="0x01ï¼šå®‰è£…äº¤å‰ç¼–è¯‘å·¥å…·"><a href="#0x01ï¼šå®‰è£…äº¤å‰ç¼–è¯‘å·¥å…·" class="headerlink" title="0x01ï¼šå®‰è£…äº¤å‰ç¼–è¯‘å·¥å…·"></a>0x01ï¼šå®‰è£…äº¤å‰ç¼–è¯‘å·¥å…·</h2><p>åœ¨å°†linuxæºç å’Œä¸€äº›ç¨‹åºç¼–è¯‘æˆå¯¹åº”ç›®æ ‡æ¶æ„æ—¶ï¼Œéœ€è¦ç”¨åˆ°äº¤å‰ç¼–è¯‘å·¥å…·ã€‚å¦‚32ä½å°ç«¯çš„armï¼Œäº¤å‰ç¼–è¯‘å·¥å…·çš„ä¸‹è½½ï¼š</p>
<pre class="line-numbers language-Shell" data-language="Shell"><code class="language-Shell">$ sudo apt install gcc-arm-linux-gnueabi<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>ä½¿ç”¨ä¸gccç±»ä¼¼ï¼Œåªæ˜¯ç›¸åº”çš„ç¨‹åºä¸º<code>arm-linux-gnueabi-gcc</code>ã€‚å·¥å…·é¡¹ç›®ç›®å½•åœ¨ï¼š<code>/usr/arm-linux-gnueabi</code>ã€‚</p>
<p>æ³¨æ„ï¼šäº¤å‰ç¼–è¯‘å·¥å…·çš„ç‰ˆæœ¬å’ŒLinuxç‰ˆæœ¬ä¸èƒ½ç›¸å·®å¤ªå¤§ï¼ˆæ¯”å¦‚æˆ‘å†…æ ¸æ˜¯5.15çš„ï¼Œå¯¹åº”gcc11æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼‰</p>
<br>

<h2 id="0x02ï¼šå†…æ ¸æºç ç¼–è¯‘"><a href="#0x02ï¼šå†…æ ¸æºç ç¼–è¯‘" class="headerlink" title="0x02ï¼šå†…æ ¸æºç ç¼–è¯‘"></a>0x02ï¼šå†…æ ¸æºç ç¼–è¯‘</h2><p>ä¸‹è½½å†…æ ¸æºç ï¼š<a target="_blank" rel="noopener" href="https://cdn.kernel.org/pub/linux/kernel/">https://cdn.kernel.org/pub/linux/kernel/</a></p>
<p>æˆ‘é€‰æ‹©çš„ç‰ˆæœ¬æ˜¯5.15.1ï¼Œxzå’Œgzéƒ½å¯ä»¥ï¼Œä¸è¿‡xzå‹ç¼©ç‡æ¯”è¾ƒé«˜ã€‚</p>
<pre class="line-numbers language-Shell" data-language="Shell"><code class="language-Shell">wget https:&#x2F;&#x2F;cdn.kernel.org&#x2F;pub&#x2F;linux&#x2F;kernel&#x2F;v5.x&#x2F;linux-5.15.1.tar.xz
tar -xvf linux-5.15.1.tar.xz

# æ³¨ï¼šä¸‹é¢çš„å‘½ä»¤ä¸­â€œCROSS_COMPILE&#x3D;arm-linux-gnueabi- ARCH&#x3D;armâ€ å¯ä»¥åœ¨é¡¶å±‚çš„(ä¹Ÿå°±æ˜¯æ ¹ç›®å½•ä¸‹çš„)Makefileè¿›è¡Œè®¾ç½®ï¼Œè¿™æ ·ä¸‹é¢å‘½ä»¤ä¸­è¯¥å­—æ®µå¯ä»¥çœç•¥

# äº§ç”Ÿé…ç½®æ–‡ä»¶ .config
# ç¬¬ä¸€ç§æ–¹æ³•ï¼šåœ¨å·²çŸ¥å¼€å‘æ¿çš„æƒ…å†µä¸‹ï¼Œé‡‡ç”¨è¯¥å¼€å‘æ¿é»˜è®¤çš„é…ç½®è®¾ç½®
make CROSS_COMPILE&#x3D;arm-linux-gnueabi- ARCH&#x3D;arm vexpress_defconfig
# ç¬¬äºŒç§æ–¹æ³•ï¼šè‡ªå·±è¿›è¡ŒæŒ‡å®šçš„é…ç½®ï¼Œmenuconfigï¼šå›¾å½¢é…ç½®ç•Œé¢
make CROSS_COMPILE&#x3D;arm-linux-gnueabi- ARCH&#x3D;arm menuconfig
# ä¸€äºŒç§æ–¹æ³•ä¹Ÿå¯ä»¥ç»“åˆ, xxx_defconfigå¤§ä½“é…ç½®, menuconfigè¿›è¡Œå¾®è°ƒ
# è¿™é‡Œæˆ‘ä»…ä½¿ç”¨äº†ç¬¬ä¸€ç§

# å¼€å§‹ç¼–è¯‘ï¼ˆæ—¶é—´æ¯”è¾ƒä¹…ï¼‰
make -j4 CROSS_COMPILE&#x3D;arm-linux-gnueabi- ARCH&#x3D;arm  # -j4:ç”¨å¤šå°‘ä¸ªæ ¸å¿ƒç¼–è¯‘

# ä¸¤ä¸ªå°†ä¼šç”¨åˆ°çš„æ–‡ä»¶
linux-5.15.1&#x2F;arch&#x2F;arm&#x2F;boot&#x2F;zImage   # å†…æ ¸é•œåƒ
linux-5.15.1&#x2F;arch&#x2F;arm&#x2F;boot&#x2F;dts&#x2F;vexpress-v2p-ca9.dtb  # è®¾å¤‡æ ‘æ–‡ä»¶ï¼Œå¾…æ·±å…¥äº†è§£<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><code>xxx_defconfig</code>æœ‰å“ªäº›é»˜è®¤é…ç½®å¯åœ¨<code>/arch/$ARCH/configs</code>è·çŸ¥ã€‚</p>
<br>

<div style="font-size: 21px;"><b>å°è¯•ä½¿ç”¨qemuå¯åŠ¨</b></div>

<p>ä¸ºäº†æ–¹ä¾¿åç»­æµ‹è¯•ï¼Œç¼–å†™ä¸ªshellæ–‡ä»¶ï¼š</p>
<pre class="line-numbers language-Shell" data-language="Shell"><code class="language-Shell">#!&#x2F;bin&#x2F;bash
qemu-system-arm \
        -M vexpress-a9 \
        -m 512M \
        -kernel .&#x2F;linux-5.15.1&#x2F;arch&#x2F;arm&#x2F;boot&#x2F;zImage \
        -dtb .&#x2F;linux-5.15.1&#x2F;arch&#x2F;arm&#x2F;boot&#x2F;vexpress-v2p-ca9.dtb \
        -append &quot;console&#x3D;ttyAMA0&quot; \
        -nographic
$ chmod +x arm_start.sh
$ sudo .&#x2F;arm_start.sh<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ç”±äºæ²¡æœ‰æ ¹æ–‡ä»¶ç³»ç»Ÿï¼Œæ‰€ä»¥ä¼šäº§ç”Ÿ<em><strong>Kernel panic</strong></em>ï¼š</p>
<p><img src="/images/IoT%E5%9B%BA%E4%BB%B6%E7%B3%BB%E7%BB%9F%E6%A8%A1%E6%8B%9F/image-20230504130936476.png" alt="image-20230504130936476"></p>
<p>(æ³¨ï¼šé€€å‡ºqemuå¿«æ·é”®ä¸º<code>Ctrl + A</code>ï¼ŒæŒ‰å®Œåå†æŒ‰<code>X</code>ï¼Œä¸è¦åŒæ—¶æŒ‰ï¼ å‘½ä»¤ï¼š<code>reboot -f</code>)</p>
<br>

<h2 id="0x03ï¼šåˆ¶ä½œæ ¹æ–‡ä»¶ç³»ç»Ÿ"><a href="#0x03ï¼šåˆ¶ä½œæ ¹æ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="0x03ï¼šåˆ¶ä½œæ ¹æ–‡ä»¶ç³»ç»Ÿ"></a>0x03ï¼šåˆ¶ä½œæ ¹æ–‡ä»¶ç³»ç»Ÿ</h2><p>Busyboxå®˜ç½‘ï¼š<a target="_blank" rel="noopener" href="http://www.busybox.net/">http://www.busybox.net/</a></p>
<pre class="line-numbers language-Shell" data-language="Shell"><code class="language-Shell"># ä¸‹è½½æºç 
$ wget https:&#x2F;&#x2F;busybox.net&#x2F;downloads&#x2F;busybox-1.35.0.tar.bz2
$ tar xvf busybox-1.35.0.tar.bz2
$ cd busybox-1.35.0&#x2F;

# busyboxæœ‰ä¸‰ç§é…ç½®æ¨¡å¼: 1)defconfig(ç¼ºçœé…ç½®); 2)allyesconfig(æœ€å¤§é…ç½®); 3)allnoconfig(æœ€å°é…ç½®)
$ make ARCH&#x3D;arm CROSS_COMPILE&#x3D;arm-linux-gnueabi- defconfig
$ make ARCH&#x3D;arm CROSS_COMPILE&#x3D;arm-linux-gnueabi-
# # CONFIG_PREFIXå¯ä»¥è®¾ç½®ä¿å­˜å¤„,å¦åˆ™é»˜è®¤_install&#x2F;
$ make ARCH&#x3D;arm CROSS_COMPILE&#x3D;arm-linux-gnueabi- install CONFIG_PREFIX&#x3D;.&#x2F;FS_space&#x2F;arm32<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><code>make install</code>æ‰§è¡ŒæˆåŠŸåï¼Œåœ¨<code>./FS_space/arm32</code>ä¸‹å‡ºç°äº†<code>bin  linuxrc  sbin  usr</code>ã€‚</p>
<p>ç»§ç»­å¡«å……å…¶å®ƒæ–‡ä»¶ï¼š</p>
<pre class="line-numbers language-Shell" data-language="Shell"><code class="language-Shell"># å› ä¸ºbusyboxç¼–è¯‘æ—¶ä½¿ç”¨çš„æ˜¯åŠ¨æ€é“¾æ¥çš„æ–¹æ³•ï¼Œæ‰€ä»¥éœ€è¦åº“æ–‡ä»¶
# æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡menuconfigå°†å…¶æ”¹ä¸ºé™æ€é“¾æ¥ï¼š
# Busybox Settings  ---&gt;
#       Build Options  ---&gt;
#           [*] Build BusyBox as a static binary (no shared libs)
$ mkdir .&#x2F;FS_space&#x2F;arm32&#x2F;lib&#x2F;
$ sudo cp -p &#x2F;usr&#x2F;arm-linux-gnueabi&#x2F;lib&#x2F;* .&#x2F;FS_space&#x2F;arm32&#x2F;lib&#x2F;
$ mkdir .&#x2F;FS_space&#x2F;arm32&#x2F;dev&#x2F;
$ sudo mknod .&#x2F;FS_space&#x2F;arm32&#x2F;dev&#x2F;tty1 c 4 1
$ sudo mknod .&#x2F;FS_space&#x2F;arm32&#x2F;dev&#x2F;tty2 c 4 2
$ sudo mknod .&#x2F;FS_space&#x2F;arm32&#x2F;dev&#x2F;tty3 c 4 3
$ sudo mknod .&#x2F;FS_space&#x2F;arm32&#x2F;dev&#x2F;tty4 c 4 4
$ sudo mknod -m 666 .&#x2F;FS_space&#x2F;arm32&#x2F;console c 5 1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<br>

<div style="font-size: 21px;"><b>äº‹æ•…æ’æ’­ï¼š</b></div>

<p>åœ¨make installæ—¶ï¼Œæ„å¤–åœ°å‘ç”Ÿäº†æŠ¥é”™ï¼š</p>
<p><img src="/images/IoT%E5%9B%BA%E4%BB%B6%E7%B3%BB%E7%BB%9F%E6%A8%A1%E6%8B%9F/image-20230504131053259.png" alt="image-20230504131053259"></p>
<p>åœ¨æŸ¥çœ‹<code>Makefile.custom</code>æ— å…³åï¼Œçœ‹è¿™æŠ¥é”™è§‰å¾—æ˜¯å­—ç¬¦ä¸²ä¸Šçš„é—®é¢˜(//å¤šäº†ä¸ª/)ã€‚æ‰€ä»¥ç›´æ¥åœ¨busyboxæ ¹ç›®å½•ä¸‹æ‰§è¡Œï¼š<code>grep -r &quot;/bin/arch&quot;</code>ã€‚æŸ¥æ‰¾ç»“æœï¼š<code>busybox.links:/bin/arch</code>ï¼Œbusybox.linksé‡Œé¢ç€æ˜¯éœ€è¦åˆ›å»ºçš„æ–‡ä»¶æˆ–ç›®å½•ã€‚åœ¨å°è¯•æ€§åœ°å°†<code>/bin/arch</code>æ”¹ä¸º<code>bin/arch</code>åï¼ŒæŠ¥é”™ç‚¹å‘ç”Ÿçš„è½¬ç§»ï¼š</p>
<p><img src="/images/IoT%E5%9B%BA%E4%BB%B6%E7%B3%BB%E7%BB%9F%E6%A8%A1%E6%8B%9F/image-20230504131213930.png" alt="image-20230504131213930"></p>
<p>ç„¶åç¼–å†™äº†pythonè„šæœ¬ï¼Œå°†å‰é¢çš„/éƒ½å»æ‰äº†ï¼Œç»“æœè¿˜æŠ¥é”™ï¼š</p>
<p><img src="/images/IoT%E5%9B%BA%E4%BB%B6%E7%B3%BB%E7%BB%9F%E6%A8%A1%E6%8B%9F/image-20230504131231295.png" alt="image-20230504131231295"></p>
<p>åæ¥å°è¯•äº†å¥½å‡ ä¸ªç‰ˆæœ¬çš„busyboxï¼Œç‰ˆæœ¬ä½çš„åœ¨ç¼–è¯‘æ—¶ä¼šæŠ¥ç¼–è¯‘å™¨çš„å…¼å®¹é—®é¢˜ï¼Œé«˜ç‰ˆæœ¬çš„1.36.0ä¸èƒ½<code>make defconfig</code>ã€‚ä¸ºäº†é¿å…é—®é¢˜çš„å¤æ‚åŒ–ï¼Œè¿˜æ˜¯å›åˆ°åŸæ¥ç‰ˆæœ¬çš„é—®é¢˜å§ã€‚</p>
<p>åæ¥æƒ³åˆ°ï¼Œæˆ‘æ˜¯åœ¨å…±äº«æ–‡ä»¶å¤¹ï¼ˆwinä¸»æœºï¼Œå› ä¸ºè™šæ‹Ÿæœºç©ºé—´ä¸å¤ªå¤Ÿï¼Œä¾¿ä¸‹è½½åˆ°è¿™é‡Œï¼‰ä¸­æ“ä½œçš„ã€‚åˆæƒ³åˆ°æœ‰æ—¶å¯ä»¥ä½¿ç”¨<code>/bin//sh</code>æ¥ä»£æ›¿<code>/bin/sh\x00</code>æ¥ç»•è¿‡\x00ï¼Œæ›´åŠ æ„Ÿè§‰æ˜¯è¿™ä¸ªåŸå› ï¼Œç„¶åæŠŠé¡¹ç›®ç§»åˆ°è™šæ‹Ÿæœºç©ºé—´ä¸­é‡å¤æ“ä½œï¼ŒæˆåŠŸäº†ã€‚è‡³äºå…·ä½“åŸå› çš„ç»†èŠ‚æœ‰å¾…ç ”ç©¶â€¦ğŸ˜¶</p>
<br>

<h2 id="0x04ï¼šåˆ¶ä½œè™šæ‹Ÿå­˜å‚¨ä»‹è´¨"><a href="#0x04ï¼šåˆ¶ä½œè™šæ‹Ÿå­˜å‚¨ä»‹è´¨" class="headerlink" title="0x04ï¼šåˆ¶ä½œè™šæ‹Ÿå­˜å‚¨ä»‹è´¨"></a>0x04ï¼šåˆ¶ä½œè™šæ‹Ÿå­˜å‚¨ä»‹è´¨</h2><p>åœ¨å¼€å‘æ¿ä¸­ï¼Œæ ¹æ–‡ä»¶ç³»ç»Ÿæ˜¯ä¿å­˜åœ¨flash ä¸­çš„ã€‚æˆ–è€…ï¼Œé€šè¿‡nfsçš„æ–¹å¼æŒ‚è½½ç½‘ç»œæ–‡ä»¶ç³»ç»Ÿä¾›linuxå†…æ ¸å¯åŠ¨æ—¶è®¿é—®ã€‚ä¸ºäº†æ¨¡æ‹Ÿï¼Œæˆ‘ä»¬éœ€è¦è™šæ‹Ÿä¸€ä¸ªå­˜å‚¨ä»‹è´¨ã€‚</p>
<pre class="line-numbers language-Shell" data-language="Shell"><code class="language-Shell">$ dd if&#x3D;&#x2F;dev&#x2F;zero of&#x3D;rootfs.ext3 bs&#x3D;1M count&#x3D;512   # ç”¨\x00åˆå§‹åŒ–ä¸€ä¸ªé•œåƒ
$ mkfs.ext3 rootfs.ext3   # æ ¼å¼åŒ–

# ä¸‹é¢çš„æŒ‚è½½-æ‹·è´-å¸è½½ï¼Œå¯ä»¥è”æƒ³ç”¨Uç›˜æ‹·è´æ’å…¥ç”µè„‘æ‹·è´æ•°æ®åæ‹”å‡ºçš„è¿‡ç¨‹
$ sudo mount -t ext3 rootfs.ext3 &#x2F;mnt&#x2F;rootfs&#x2F; -o loop
$ sudo cp -rf ~&#x2F;iot&#x2F;linuxSRC&#x2F;busybox-1.35.0&#x2F;FS_space&#x2F;arm32&#x2F;* &#x2F;mnt&#x2F;rootfs
$ ls &#x2F;mnt&#x2F;rootfs&#x2F;
bin  linuxrc  lost+found  sbin  usr
$ sudo umount &#x2F;mnt&#x2F;rootfs&#x2F;
$ ls &#x2F;mnt&#x2F;rootfs&#x2F;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<br>

<p>qemuæ·»åŠ ï¼Œå°è¯•å¯åŠ¨ï¼š</p>
<pre class="line-numbers language-Shell" data-language="Shell"><code class="language-Shell">#!&#x2F;bin&#x2F;bash
qemu-system-arm \
        -M vexpress-a9 \
        -m 512M \
        -kernel .&#x2F;linux-5.15.1&#x2F;arch&#x2F;arm&#x2F;boot&#x2F;zImage \
        -dtb .&#x2F;linux-5.15.1&#x2F;arch&#x2F;arm&#x2F;boot&#x2F;vexpress-v2p-ca9.dtb \
        -append &quot;root&#x3D;&#x2F;dev&#x2F;mmcblk0 console&#x3D;ttyAMA0&quot; \
        -sd .&#x2F;rootfs.ext3 \
        -nographic<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>æˆåŠŸæ‰§è¡Œï¼š</p>
<p><img src="/images/IoT%E5%9B%BA%E4%BB%B6%E7%B3%BB%E7%BB%9F%E6%A8%A1%E6%8B%9F/image-20230504131728877.png" alt="image-20230504131728877"></p>
<p>ä¸è¿‡è¿˜æ˜¯æœ‰ä¸€äº›è­¦å‘Šï¼š<code>can&#39;t run &#39;/etc/init.d/rcS&#39;: No such file or directory</code></p>
<p>å®Œå–„æ–¹æ¡ˆ(ä»…ä¾›å‚è€ƒ)ï¼š</p>
<pre class="line-numbers language-Shell" data-language="Shell"><code class="language-Shell">$ sudo mount -t ext3 rootfs.ext3 &#x2F;mnt&#x2F;rootfs&#x2F; -o loop
$ cd &#x2F;mnt&#x2F;rootfs&#x2F;
$ ls
bin  console  dev  lib  linuxrc  lost+found  sbin  usr
$ sudo mkdir etc mnt
$ sudo mkdir -p etc&#x2F;init.d&#x2F;
$ sudo vim etc&#x2F;fstab
$ cat etc&#x2F;fstab
proc &#x2F;proc proc&amp;nbsp;defaults 0 0
tmpfs &#x2F;tmp tmpfs&amp;nbsp;defaults 0 0
none &#x2F;tmp ramfs defaults 0 0
sysfs &#x2F;sys sysfs defaults 0 0
mdev &#x2F;dev&amp;nbsp;ramfs defaults 0 0
$ sudo vim etc&#x2F;init.d&#x2F;rcS
$ sudo chmod 755 etc&#x2F;init.d&#x2F;rcS
$ sudo vim etc&#x2F;inittab
$ cat etc&#x2F;inittab
::sysinit:&#x2F;etc&#x2F;init.d&#x2F;rcS
::respawn:-&#x2F;bin&#x2F;sh
::askfirst:-&#x2F;bin&#x2F;sh
::cttlaltdel:&#x2F;bin&#x2F;umount -a -r
$ sudo chmod 755 etc&#x2F;inittab
$ sudo mknod dev&#x2F;null c 1 3
$ cd ~    # é€€å‡º&#x2F;mnt&#x2F;rootfsæ‰èƒ½umount
$ sudo umount &#x2F;mnt&#x2F;rootfs&#x2F;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<br>

<h2 id="0x05ï¼šå‚è€ƒé“¾æ¥"><a href="#0x05ï¼šå‚è€ƒé“¾æ¥" class="headerlink" title="0x05ï¼šå‚è€ƒé“¾æ¥"></a>0x05ï¼šå‚è€ƒé“¾æ¥</h2><p><a target="_blank" rel="noopener" href="https://www.orientdisplay.com/emulating-embedded-linux-systems-with-qemu/">https://www.orientdisplay.com/emulating-embedded-linux-systems-with-qemu/</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_56548489/article/details/124720860">https://blog.csdn.net/m0_56548489/article/details/124720860</a></p>
<p class="textAlignRight"><span>â†¶ </span><a href="/">è¿”å›é¦–é¡µ</a><span></span></p></div></div></body><script src="/js/highlight.min.js"></script><script src="/js/main.js"></script><script src="/js/bootstrap/bootstrap.min.js"></script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script async="" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>MathJax = {
      tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']]
      },
      svg: {
          fontCache: 'global'
      }
  };
</script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', '');</script></html>